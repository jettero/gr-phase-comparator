<?xml version="1.0"?>

<block>
    <name>Phase Comparator</name>
    <key>phase_comparator</key>
    <category>Math Operators</category>
    <import>import grphasecomparator</import>
    <make>grphasecomparator.phase_comparator(wrap_window=$wrap_window)</make>

    <param>
        <name>Wrap Window</name>
        <key>wrap_window</key>
        <value>[-2.8,2.8]</value>
        <type>real_vector</type>
    </param>

    <check> len($wrap_window) == 2 and $(wrap_window)[0] &lt;= 0 and $(wrap_window)[1] &gt;= 0 </check>

	<sink>
		<name>in</name>
        <type>complex</type>
        <vlen>1</vlen>
        <nports>2</nports>
	</sink>

	<source>
        <name>out</name>
		<type>float</type>
        <vlen>1</vlen>
	</source>

    <doc>
Compare the difference in phase between two complex signals, trying to un-wrap PI rolls where possible (i.e., ideally the phase would progress: 3, 3.1, 3.15, 4, 5, 7, etc)

Args:
    wrap_window: default=%s
        e.g., if sample n-1 is above window[1] and sample n is below window[0], then wrap a couple PI
    </doc>

</block>
